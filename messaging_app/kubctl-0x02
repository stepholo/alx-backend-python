#!/bin/bash

echo "ğŸš€ Deploying Blue version..."
kubectl apply -f blue_deployment.yaml

echo "ğŸš€ Deploying Green version..."
kubectl apply -f green_deployment.yaml

echo "â³ Waiting for pods to start..."
sleep 10

echo "ğŸ” Checking logs of Green version pods for errors..."
GREEN_PODS=$(kubectl get pods -l version=green -o jsonpath='{.items[*].metadata.name}')

for pod in $GREEN_PODS; do
  echo "ğŸ“„ Logs for $pod:"
  kubectl logs $pod | grep -i error || echo "âœ… No errors found"
done

